<div
  class="form-indentification-container"
  [ngBusy]="{
    busy: busySave,
    message: 'Veuillez patienter ...',
    backdrop: false
  }"
>
  <form [formGroup]="formulaireGroup" (ngSubmit)="confirmSaveItem()">
    <fieldset class="mt-3">
        <legend>Identification du traité</legend>
        <div class="row">
        <div class="col-md-3 col-xs-12 col-sm-12 mb-1">
            <label>Exercice : <span class="required_champs">*</span> </label>
    
            <ng-select
              formControlName="exeCode"
              name="exeCode"
              id="exeCode"
              [readonly]="true"
            >
              <ng-option
                *ngFor="let exercice of listeExercices"
                [value]="exercice?.exeCode"
                >{{ exercice.exeLibelle }}</ng-option
              >
            </ng-select>
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('exeCode')?.dirty || getFormFiledsValue('exeCode')?.touched) && getFormFiledsValue('exeCode')?.invalid && getFormFiledsValue('exeCode')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
    
          <!-- <div class="col-md-3 col-xs-12 col-sm-12 mb-3">
            <label>Filiale/cédante : <span class="required_champs">*</span> </label>
    
            <ng-select
              formControlName="cedId"
              name="cedenteId"
              id="cedenteId"
              [readonly]="user?.cedId || isDetails"
            >
              <ng-option
                *ngFor="let cedente of listeCedente"
                [value]="cedente?.cedId"
                >{{ cedente.cedNomFiliale }}</ng-option
              >
            </ng-select>
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('cedId')?.dirty || getFormFiledsValue('cedId')?.touched) && getFormFiledsValue('cedId')?.invalid && getFormFiledsValue('cedId')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div> -->
    
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Numéro de police :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Référence :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Source :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-6 col-xs-12 col-sm-12 mb-1">
            <label>Nature : <span class="required_champs">*</span> </label>
    
            <ng-select
              formControlName="exeCode"
              name="exeCode"
              id="exeCode"
              
            >
              <ng-option
                *ngFor="let exercice of listeExercices"
                [value]="exercice?.exeCode"
                >{{ exercice.exeLibelle }}</ng-option
              >
            </ng-select>
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('exeCode')?.dirty || getFormFiledsValue('exeCode')?.touched) && getFormFiledsValue('exeCode')?.invalid && getFormFiledsValue('exeCode')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-6 col-xs-12 col-sm-12 mb-1">
            <label>Exercice de rattachement : <span class="required_champs">*</span> </label>
    
            <ng-select
              formControlName="exeCode"
              name="exeCode"
              id="exeCode"
              
            >
              <ng-option
                *ngFor="let exercice of listeExercices"
                [value]="exercice?.exeCode"
                >{{ exercice.exeLibelle }}</ng-option
              >
            </ng-select>
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('exeCode')?.dirty || getFormFiledsValue('exeCode')?.touched) && getFormFiledsValue('exeCode')?.invalid && getFormFiledsValue('exeCode')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Date d'effet :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Echeance :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          <div class="col-md-3 col-xs-12 col-sm-12 mb-1">
            <label>Devise : <span class="required_champs">*</span> </label>
    
            <ng-select
              formControlName="exeCode"
              name="exeCode"
              id="exeCode"
              
            >
              <ng-option
                *ngFor="let exercice of listeExercices"
                [value]="exercice?.exeCode"
                >{{ exercice.exeLibelle }}</ng-option
              >
            </ng-select>
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('exeCode')?.dirty || getFormFiledsValue('exeCode')?.touched) && getFormFiledsValue('exeCode')?.invalid && getFormFiledsValue('exeCode')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Coûts :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-12 col-xs-12 mb-1">
            <label
              >Placé par  :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
        </div>
    </fieldset>
    
    <fieldset class="mt-4">
        <legend>Comptabilisation</legend>
        <div class="row">
      
            <div class="col-md-3 col-xs-12 mb-1">
              <label
                >Périodicité :
                <span class="required_champs">*</span>
              </label>
              <input
                class="form-control custom-input"
                placeholder="Assuré"
                autocomplete="off"
                formControlName="affAssure"
                name="affAssure"
                [readonly]="isDetails"
                [class.errorInputForm]="
                  getFormFiledsValue('affAssure')?.invalid &&
                  getFormFiledsValue('affAssure')?.touched
                "
                type="text"
              />
              <small
                class="text-danger"
                *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
              >
                Ce champ est obligatoire
              </small>
            </div>
  
            <div class="col-md-3 col-xs-12 mb-1">
              <label
                >Delai d'envoi (jours) :
                <span class="required_champs">*</span>
              </label>
              <input
                class="form-control custom-input"
                placeholder="Assuré"
                autocomplete="off"
                formControlName="affAssure"
                name="affAssure"
                [readonly]="isDetails"
                [class.errorInputForm]="
                  getFormFiledsValue('affAssure')?.invalid &&
                  getFormFiledsValue('affAssure')?.touched
                "
                type="text"
              />
              <small
                class="text-danger"
                *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
              >
                Ce champ est obligatoire
              </small>
            </div>

            <div class="col-md-3 col-xs-12 mb-1">
              <label
                >Délai de confirmation :
                <span class="required_champs">*</span>
              </label>
              <input
                class="form-control custom-input"
                placeholder="Assuré"
                autocomplete="off"
                formControlName="affAssure"
                name="affAssure"
                [readonly]="isDetails"
                [class.errorInputForm]="
                  getFormFiledsValue('affAssure')?.invalid &&
                  getFormFiledsValue('affAssure')?.touched
                "
                type="text"
              />
              <small
                class="text-danger"
                *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
              >
                Ce champ est obligatoire
              </small>
            </div>

           <div class="col-md-3 col-xs-12 mb-1">
              <label
                >Dévise :
                <span class="required_champs">*</span>
              </label>
              <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
              <small
                class="text-danger"
                *ngIf="(getFormFiledsValue('affActivite')?.dirty || getFormFiledsValue('affActivite')?.touched) && getFormFiledsValue('affActivite')?.invalid && getFormFiledsValue('affActivite')?.errors?.['required']"
              >
                Ce champ est obligatoire
              </small>
           </div>
         
           <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Test :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Test :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Test :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Test :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          </div>
    </fieldset>
 
    <fieldset class="mt-4">
        <legend>Rénumeration du courtier</legend>
        <div class="row">
          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Taux courtier :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Surcommission :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>

          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Test :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>


          <div class="col-md-3 col-xs-12 mb-1">
            <label
              >Test :
              <span class="required_champs">*</span>
            </label>
            <input
              class="form-control custom-input"
              placeholder="Assuré"
              autocomplete="off"
              formControlName="affAssure"
              name="affAssure"
              [readonly]="isDetails"
              [class.errorInputForm]="
                getFormFiledsValue('affAssure')?.invalid &&
                getFormFiledsValue('affAssure')?.touched
              "
              type="text"
            />
            <small
              class="text-danger"
              *ngIf="(getFormFiledsValue('affAssure')?.dirty || getFormFiledsValue('affAssure')?.touched) && getFormFiledsValue('affAssure')?.invalid && getFormFiledsValue('affAssure')?.errors?.['required']"
            >
              Ce champ est obligatoire
            </small>
          </div>
          
          </div>
    </fieldset>

    <div class="custom-btn-save-manager" *ngIf="!isDetails">
      <button
        type="submit"
        class="btn btn-md custom_btn_primary pull-right"
        
      >
        {{ itemToUpdate?.affId ? "Modifier" : "Enregistrer et continuer" }}
      </button>

      <button
        type="button"
        class="btn btn-md btn-cancel pull-right"
        (click)="closeModal.emit(false)"
        *ngIf="isWizardProcess"
      >
        Annuler
      </button>
    </div>
  </form>
</div>
