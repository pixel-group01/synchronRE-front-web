
<form [formGroup]="formulaireGroup" (ngSubmit)="confirmSaveItem(formulaireGroup.value)"
class="body table-responsive clsOverflow"
  [ngBusy]="{busy: busyGet, message: 'Veuillez patienter ...', backdrop: false}"
>
  <div class="row">
    <div class="col-md-12 col-xs-12 col-sm-12 mb-1">
        <label>Couverture : <span class="required_champs">*</span> </label>

        <ng-select
          formControlName="risqueId"
          [class.errorInputForm]="
                getFormFiledsValue('risqueId')?.invalid &&
                getFormFiledsValue('risqueId')?.touched
              "
          name="risqueId"
          id="risqueId"
          (ngModelChange)="getActivites($event)"
        >
          <ng-option
            *ngFor="let couv of couverturesParents"
            [value]="couv?.risqueId"
            >{{ couv.couLibelle }}
        </ng-option>
        </ng-select>
        <small
          class="text-danger"
          *ngIf="(getFormFiledsValue('risqueId')?.dirty || getFormFiledsValue('risqueId')?.touched) && getFormFiledsValue('risqueId')?.invalid && getFormFiledsValue('risqueId')?.errors?.['required']"
            >
          Ce champ est obligatoire
        </small>
      </div>

    <div class="col-md-12 col-xs-12 col-sm-12 mb-1">
      <label>Activit√©s : <span class="required_champs">*</span> </label>

      <ng-select
        formControlName="couId"
        [class.errorInputForm]="
                getFormFiledsValue('couId')?.invalid &&
                getFormFiledsValue('couId')?.touched
              "
        name="couId"
        id="couId"
      >
        <ng-option
          *ngFor="let act of activiteListe"
          [value]="act?.couId"
        >{{ act.couLibelle }}
        </ng-option>
      </ng-select>
      <small
        class="text-danger"
        *ngIf="(getFormFiledsValue('couId')?.dirty || getFormFiledsValue('couId')?.touched) && getFormFiledsValue('couId')?.invalid && getFormFiledsValue('couId')?.errors?.['required']"
      >
        Ce champ est obligatoire
      </small>
    </div>

      <div class="col-md-12 col-xs-12 mb-1">
        <label
          >Montant :
          <span class="required_champs">*</span>
        </label>
        <input
          class="form-control custom-input"
          placeholder=""
          autocomplete="off"
          name="sousLimMontant"
          mask="separator"
          type="text"
          formControlName="sousLimMontant"
          [class.errorInputForm]="
            getFormFiledsValue('sousLimMontant')?.invalid &&
            getFormFiledsValue('sousLimMontant')?.touched
          "
        />
        <small
        class="text-danger"
        *ngIf="(getFormFiledsValue('sousLimMontant')?.dirty || getFormFiledsValue('sousLimMontant')?.touched) && getFormFiledsValue('sousLimMontant')?.invalid && getFormFiledsValue('terrLibelle')?.errors?.['required']"
          >
        Ce champ est obligatoire
      </small>
      </div>

      <div class="col-md-12 col-xs-12 col-sm-12 mb-2">
        <button type="submit" [disabled]="!formulaireGroup.valid" class="btn btn-md custom_btn_primary pull-right">Enregistrer</button>
      </div>

    </div>
</form>
